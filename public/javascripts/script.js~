var puntos = [
    { "id": 1, "x" : 1.0, "y" : 7.0 },
    { "id": 2, "x" : 2.0, "y" : 6.0 },
    { "id": 3, "x" : 4.0, "y" : 8.0 },
    { "id": 4, "x" : 10.0, "y" : 19.0 },
    { "id": 5, "x" : 11.0, "y" : 15.0}
];

var centroides =  [
    { "id": 1, "x" : 3, "y" : 5 },
    { "id": 2, "x" : 12, "y" : 13 }
];

var DATOS_TOTALES = puntos.length;

function ejecutar(puntos, centroides){
    
    //datos
    var fuente = $('#plantilla-tabla-datos').html();
    var plantilla = Handlebars.compile(fuente);
    var html = plantilla(puntos);
    $('#tabla-datos').html(html);
    
    //centroides
    var fuente = $('#plantilla-tabla-centroides').html();
    var plantilla = Handlebars.compile(fuente);
    var html = plantilla(centroides);
    $('#tabla-centroides').html(html);
    
    
    //Calcular distancia Ecuclidiana
    obtenerDist(puntos,centroides);
    var fuente = $('#plantilla-tabla-distancia').html();
    var plantilla = Handlebars.compile(fuente);
    var html = plantilla(puntos);
    $('#tabla-distancia').html(html);
    
    //Agrupar los mas cercanos a los Centroides
    agrupamiento(puntos);
    var fuente = $('#plantilla-tabla-grupos').html();
    var plantilla = Handlebars.compile(fuente);
    var html = plantilla(puntos);
    $('#tabla-grupos').html(html);
    
    //Recalcular Centroides
    recalcularCent(puntos,centroides);
    var fuente = $('#plantilla-tabla-centroides-recalculados').html();
    var plantilla = Handlebars.compile(fuente);
    var html = plantilla(centroides);
    $('#tabla-centroides-recalculados').html(html);
    
    return centroides;
}

$(document).ready(function(){

    ejecutar(puntos,centroides);
    
    $("#ejecutar").click( function(e) {
	ejecutar(puntos,centroides);
    });

    //De aqui para abajo la estas cagando
    $("td").on('change','.puntos',function(e){
	
	puntos[0].x = $("#1-x").val();
	puntos[1].x = $("#2-x").val();
	puntos[2].x = $("#3-x").val();
	puntos[3].x = $("#4-x").val();
	puntos[4].x = $("#5-x").val();

	puntos[0].y = $("#1-y").val();
	puntos[1].y = $("#2-y").val();
	puntos[2].y = $("#3-y").val();
	puntos[3].y = $("#4-y").val();
	puntos[4].y = $("#5-y").val();
	
    });

    $("td").on('change','.centroides',function(e){
	
	centroides[0].x = $("#c1-x").val();
	centroides[1].x = $("#c2-x").val();
	
	centroides[0].y = $("#c1-y").val();
	centroides[1].y = $("#c2-y").val();
    });
    
    //hasta aqui

});
